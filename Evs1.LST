A51 MACRO ASSEMBLER  EVS1                                                                 09/11/2023 17:39:59 PAGE     1


MACRO ASSEMBLER A51 V8.02b
OBJECT MODULE PLACED IN Evs1.OBJ
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE Evs1.a51 SET(SMALL) DEBUG EP

LOC  OBJ            LINE     SOURCE

                       1     ;F(X3,X2,X1,X0) == 1 <=> 1,4,6,8,9,11,14
0000                   2     ORG 0000h;
  0011                 3     BASEADDRESS EQU 0011h;11h
  0004                 4     RELATIVEADDRESS EQU 0004h;04h
0000 020003            5     LJMP MAIN
                       6     ;ORG 5000
0003                   7     MAIN:
                       8     ;MOV P0, #0FFh
  00C0                 9     P4 EQU 0C0h
0003 75A000           10     MOV P2,#00h
0006 908000           11     MOV DPTR, #8000h
0009 7404             12     MOV A,#0004h ;0004h - relative address
000B F0               13     MOVX @DPTR, A 
000C 900004           14     MOV DPTR,#0004h
000F 7411             15     MOV A, #0011h; 0011h - base address
0011 F0               16     MOVX @DPTR, A
                      17     ;MOV DPTR, #8000h
                      18     ;MOV DPTR, R0
0012 7452             19     MOV A,  #01010010b
0014 900011           20     MOV DPTR, #0011h
0017 F0               21     MOVX  @DPTR, A          ;0-7 truth table in ex memory
                      22     ;MOV DPTR, #8001h
0018 744B             23     MOV A,  #01001011b
001A 900012           24     MOV DPTR, #0012h
001D F0               25     MOVX @DPTR, A ;8-15 truth table in ex memory
001E C2C0             26     CLR P4.0;
0020 D2C1             27     SETB P4.1;
0022                  28     MET1:
0022 907FFB           29     MOV DPTR,#7FFBh ;address isReady flag
0025                  30     isReady:                ;check flag isReady
0025 E0               31     MOVX A,@DPTR    ;read flag
0026 5401             32     ANL A,#01h              ;select 0 bit
0028 60FB             33     JZ isReady
002A 907FFA           34     MOV DPTR,#7FFAh ;addres of (x3,x2,x1,x0) tuple
002D E0               35     MOVX A,@DPTR    ;write tuple to A
002E F520             36     MOV 20h, A              ;write x3,x2,x1,x0 to 20h
                      37     ; F(x3,x2,x1,x0) = ^x0 & x2 & x1 v ^x3 & ^x0 & x2 v ^x2 & ^x1 & x0 v x3 & ^x2 & (x0 v ^x1)
                      38     ;X3 - 3, X2 - 2, X1 - 1, X0 - 0
                      39     
0030 A2E0             40     MOV C, ACC.0 ;C = X0
0032 B3               41     CPL C;C = ^X0
0033 82E2             42     ANL C, ACC.2; C = ^X0 & X2
0035 82E1             43     ANL C, ACC.1; C = ^X0 & X2 & X1
0037 9204             44     MOV 20h.4, C; 03 = ^X0 & X2 & X1 -- 1
                      45     
0039 A2E3             46     MOV C, ACC.3;C = X3
003B 72E0             47     ORL C, ACC.0; C = X3 V X0
003D B3               48     CPL C; C = ^X3 & ^X0
003E 82E2             49     ANL C, ACC.2; C = ^X3 & ^X0 & X2
0040 7204             50     ORL C, 20h.4; C = ^x0 & x2 & x1 v ^x3 & ^x0 & x2
0042 9204             51     MOV 20h.4, C; 03 = ^x0 & x2 & x1 v ^x3 & ^x0 & x2 -- 2
                      52     
0044 A2E2             53     MOV C, ACC.2;C = X2
0046 72E1             54     ORL C, ACC.1; C = X2 V X1
0048 B3               55     CPL C; C = ^X2 & ^X1
0049 82E0             56     ANL C, ACC.0; C = ^X2 & ^X1 & X0
004B 7204             57     ORL C, 20h.4; C = ^x0 & x2 & x1 v ^x3 & ^x0 & x2 v ^x2 & ^x1 & x0
004D 9204             58     MOV 20h.4, C; 03 = ^x0 & x2 & x1 v ^x3 & ^x0 & x2 v ^x2 & ^x1 & x0 -- 4
A51 MACRO ASSEMBLER  EVS1                                                                 09/11/2023 17:39:59 PAGE     2

                      59     
004F A2E1             60     MOV C, ACC.1; C = X1
0051 B3               61     CPL C; C = ^X1
0052 72E0             62     ORL C, ACC.0; C = X0 V ^X1
0054 B3               63     CPL C; C = ^X0 & X1
0055 72E2             64     ORL C, ACC.2; C = X2 V (^X0 & X1)
0057 B3               65     CPL C; C = ^X2 & (X0 V ^X1)
0058 82E3             66     ANL C, ACC.3; C = X3 & ^X2 & (X0 V ^X1)
005A 7204             67     ORL C, 20h.4; C = ^x0 & x2 & x1 v ^x3 & ^x0 & x2 v ^x2 & ^x1 & x0 v x3 & ^x2 & (x0 v ^x1)
005C 92C0             68     MOV     P4.0,C  ;res:=F
                      69     ; LOADING IDEALS
005E 20E310           70     JB ACC.3, SECOND        ;esli nabor >7
0061 908000           71     MOV DPTR, #8000h
0064 E0               72     MOVX A, @DPTR; A = RELATIVE ADDRESS
0065 F8               73     MOV R0, A
0066 E2               74     MOVX A, @R0;A = BASE ADDRESS
0067 F8               75     MOV R0, A
0068 E2               76     MOVX A, @R0; A = IDEALS
                      77     ;MOV DPTR, #8000h;
                      78     ; -- MY ADDITION
                      79     ;MOVX A, @DPTR
0069 8520F0           80     MOV B, 20h
006C 53F007           81     ANL B, #00000111b
                      82     ;--------
006F 0181             83     AJMP NEXT;
0071                  84     SECOND:
0071 908000           85     MOV DPTR, #8000h
0074 E0               86     MOVX A, @DPTR; A = RELATIVE ADDRESS
0075 F8               87     MOV R0, A
0076 E2               88     MOVX A, @R0; A = BASE ADDRESS
0077 2401             89     ADD A,#0001h
0079 F8               90     MOV R0, A
007A E2               91     MOVX A, @R0; A = IDEALS
                      92     ;MOV DPTR, #8001h;
                      93     ;-- MY ADDITION
007B 8520F0           94     MOV B, 20h
007E 53F00F           95     ANL B, #00001111b
                      96     ; -------------
0081                  97     NEXT:
                      98     ;MOVX A, @DPTR  ; A = half of truth table
                      99     ;MOV B, 20h;
                     100     ;ANL B, #00000111b; zapis v B 3 mladshih bita;
0081 C5F0            101     XCH A, B                ; A = schetchik
0083 6006            102     JZ END_OF_CYCLE ; if count = 0
0085 C5F0            103     XCH A, B                ; A = half of truth table, B = count
0087                 104     cycle:
0087 03              105     RR A;
0088 D5F0FC          106     DJNZ B, cycle;
008B                 107     END_OF_CYCLE:
008B F5F0            108     MOV B, A;
008D A2F0            109     MOV C, B.0              ;bit iz tablici
008F B3              110     CPL C                   ; it inverted
0090 92C1            111     MOV P4.1, C             ; P4.1 = inverted bit iz tablici
0092 907FFB          112     MOV DPTR,#7FFBh
0095 E500            113     MOV A, 00h
0097 0122            114     AJMP MET1;
                     115     END
A51 MACRO ASSEMBLER  EVS1                                                                 09/11/2023 17:39:59 PAGE     3

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

ACC. . . . . . . .  D ADDR   00E0H   A   
B. . . . . . . . .  D ADDR   00F0H   A   
BASEADDRESS. . . .  N NUMB   0011H   A   
CYCLE. . . . . . .  C ADDR   0087H   A   
END_OF_CYCLE . . .  C ADDR   008BH   A   
ISREADY. . . . . .  C ADDR   0025H   A   
MAIN . . . . . . .  C ADDR   0003H   A   
MET1 . . . . . . .  C ADDR   0022H   A   
NEXT . . . . . . .  C ADDR   0081H   A   
P2 . . . . . . . .  D ADDR   00A0H   A   
P4 . . . . . . . .  N NUMB   00C0H   A   
RELATIVEADDRESS. .  N NUMB   0004H   A   
SECOND . . . . . .  C ADDR   0071H   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
